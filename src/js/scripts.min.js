/*
 * Konami-JS ~
 * :: Now with support for touch events and multiple instances for
 * :: those situations that call for multiple easter eggs!
 * Code: http://konami-js.googlecode.com/
 * Examples: http://www.snaptortoise.com/konami-js
 * Copyright (c) 2009 George Mandis (georgemandis.com, snaptortoise.com)
 * Version: 1.4.2 (9/2/2013)
 * Licensed under the MIT License (http://opensource.org/licenses/MIT)
 * Tested in: Safari 4+, Google Chrome 4+, Firefox 3+, IE7+, Mobile Safari 2.2.1 and Dolphin Browser
 */

var Konami = function (callback) {
    var konami = {
        addEvent: function (obj, type, fn, ref_obj) {
            if (obj.addEventListener)
                obj.addEventListener(type, fn, false);
            else if (obj.attachEvent) {
                // IE
                obj["e" + type + fn] = fn;
                obj[type + fn] = function () {
                    obj["e" + type + fn](window.event, ref_obj);
                }
                obj.attachEvent("on" + type, obj[type + fn]);
            }
        },
        input: "",
        pattern: "38384040373937396665",
        load: function (link) {
            this.addEvent(document, "keydown", function (e, ref_obj) {
                if (ref_obj) konami = ref_obj; // IE
                konami.input += e ? e.keyCode : event.keyCode;
                if (konami.input.length > konami.pattern.length)
                    konami.input = konami.input.substr((konami.input.length - konami.pattern.length));
                if (konami.input == konami.pattern) {
                    konami.code(link);
                    konami.input = "";
                    e.preventDefault();
                    return false;
                }
            }, this);
            this.iphone.load(link);
        },
        code: function (link) {
            window.location = link
        },
        iphone: {
            start_x: 0,
            start_y: 0,
            stop_x: 0,
            stop_y: 0,
            tap: false,
            capture: false,
            orig_keys: "",
            keys: ["UP", "UP", "DOWN", "DOWN", "LEFT", "RIGHT", "LEFT", "RIGHT", "TAP", "TAP"],
            code: function (link) {
                konami.code(link);
            },
            load: function (link) {
                this.orig_keys = this.keys;
                konami.addEvent(document, "touchmove", function (e) {
                    if (e.touches.length == 1 && konami.iphone.capture == true) {
                        var touch = e.touches[0];
                        konami.iphone.stop_x = touch.pageX;
                        konami.iphone.stop_y = touch.pageY;
                        konami.iphone.tap = false;
                        konami.iphone.capture = false;
                        konami.iphone.check_direction();
                    }
                });
                konami.addEvent(document, "touchend", function (evt) {
                    if (konami.iphone.tap == true) konami.iphone.check_direction(link);
                }, false);
                konami.addEvent(document, "touchstart", function (evt) {
                    konami.iphone.start_x = evt.changedTouches[0].pageX;
                    konami.iphone.start_y = evt.changedTouches[0].pageY;
                    konami.iphone.tap = true;
                    konami.iphone.capture = true;
                });
            },
            check_direction: function (link) {
                x_magnitude = Math.abs(this.start_x - this.stop_x);
                y_magnitude = Math.abs(this.start_y - this.stop_y);
                x = ((this.start_x - this.stop_x) < 0) ? "RIGHT" : "LEFT";
                y = ((this.start_y - this.stop_y) < 0) ? "DOWN" : "UP";
                result = (x_magnitude > y_magnitude) ? x : y;
                result = (this.tap == true) ? "TAP" : result;

                if (result == this.keys[0]) this.keys = this.keys.slice(1, this.keys.length);
                if (this.keys.length == 0) {
                    this.keys = this.orig_keys;
                    this.code(link);
                }
            }
        }
    }

    typeof callback === "string" && konami.load(callback);
    if (typeof callback === "function") {
        konami.code = callback;
        konami.load();
    }

    return konami;
};
(function () {
    'use strict';

    angular
        .module('starterApp', ['ngMaterial', 'ngRoute', 'informations'])
        .controller('AppCtrl', ['$scope', 'infoService', '$mdSidenav', '$log', '$mdDialog', '$mdToast', '$location', PortfolioAppController])
        .config(function ($mdThemingProvider) {
            $mdThemingProvider.theme('default')
                .primaryPalette('deep-purple')
                .accentPalette('amber');
            // $mdThemingProvider.theme('sub')
            //     .primaryPalette('cyan');
        })
        .config(function ($routeProvider) {
            $routeProvider
                .when('/home', {
                    templateUrl: './views/home.html'
                })
                .when('/about', {
                    templateUrl: './views/about.html'
                })
                .when('/personal', {
                    templateUrl: './views/personal.html'
                })
                .when('/professional', {
                    templateUrl: './views/professional.html'
                })
                .when('/contact', {
                    templateUrl: './views/contact.html'
                })
                .when('/', {
                    redirectTo: '/home'
                })
                .otherwise({
                    redirectTo: '/home'
                });
        });

    function PortfolioAppController($scope, infoService, $mdSidenav, $log, $mdDialog, $mdToast, $location) {
        var devMessage,
            secretUnlocked = false,
            easter_egg;
        //http://textart4u.blogspot.com.es/2014/04/triforce-zelda-symbol-ascii-text-art.html
        devMessage =
            '\n' +
            'Un nuevo desafío ante ti...\n' +
            '────────────────▄────────────────\n' +
            '──────────────▄▀░▀▄──────────────\n' +
            '────────────▄▀░░░░░▀▄────────────\n' +
            '──────────▄▀░░░░░░░░░▀▄──────────\n' +
            '────────▄█▄▄▄▄▄▄▄▄▄▄▄▄▄█▄────────\n' +
            '───────▄▀▄─────────────▄▀▄───────\n' +
            '─────▄▀░░░▀▄─────────▄▀░░░▀▄─────\n' +
            '───▄▀░░░░░░░▀▄─────▄▀░░░░░░░▀▄───\n' +
            '─▄▀░░░░░░░░░░░▀▄─▄▀░░░░░░░░░░░▀▄─\n' +
            '▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀\n' +
            '\n' +
            'Haz foco en cualquier parte del portafolio\n' +
            'e introduce el código Konami: \n' +
            '"▲, ▲, ▼, ▼, ◀, ▶, ◀, ▶, B, A".\n' +
            'Si usas un dispositivo táctil prueba con: \n' +
            '"▲, ▲, ▼, ▼, ◀, ▶, ◀, ▶, tap, tap".\n';

        $log.info(devMessage);

        function toggleSideNav(name) {
            $mdSidenav(name).toggle();
        }

        $scope.toggleSidenav = toggleSideNav;
        $scope.skills = [];
        $scope.educations = []
        $scope.projects = {
            personal: [],
            professional: []
        };
        $scope.socials = [];

        $scope.predicate = 'index';
        $scope.selectedIndex = 0;

        $scope.paths = [{
            path: 'home',
            text: 'Inicio',
            icon: 'icon-home',
            index: 0
        }, {
            path: 'about',
            text: 'Perfil',
            icon: 'icon-vcard',
            index: 1
        }, {
            path: 'personal',
            text: 'Proyectos personales',
            icon: 'icon-lamp',
            index: 2
        }, {
            path: 'professional',
            text: 'Experiencia',
            icon: 'icon-docs',
            index: 3
        }, {
            path: 'contact',
            text: 'Contacto',
            icon: 'icon-share',
            index: 4
        }];

        $scope.toolbarIcon = $scope.paths[0].icon;

        $scope.changeView = function (view) {
            $location.path(view);
        };

        $scope.$on('$routeChangeSuccess', function () {
            var currentPath = $location.path();
            switch (currentPath) {
            case '/' + $scope.paths[0].path:
                $scope.toolbarIcon = $scope.paths[0].icon;
                $scope.selectedIndex = $scope.paths[0].index;
                break;
            case '/' + $scope.paths[1].path:
                $scope.toolbarIcon = $scope.paths[1].icon;
                $scope.selectedIndex = $scope.paths[1].index;
                break;
            case '/' + $scope.paths[2].path:
                $scope.toolbarIcon = $scope.paths[2].icon;
                $scope.selectedIndex = $scope.paths[2].index;
                break;
            case '/' + $scope.paths[3].path:
                $scope.toolbarIcon = $scope.paths[3].icon;
                $scope.selectedIndex = $scope.paths[3].index;
                break;
            case '/' + $scope.paths[4].path:
                $scope.toolbarIcon = $scope.paths[4].icon;
                $scope.selectedIndex = $scope.paths[4].index;
                break;
            default:
                $scope.toolbarIcon = $scope.paths[0].icon;
                $scope.selectedIndex = $scope.paths[0].index;
            };
        });

        $scope.$watch('selectedIndex', function (newValue) {
            $scope.changeView($scope.paths[newValue].path);
        });

        function DialogController($scope, $mdDialog) {
            $scope.hide = function () {
                $mdDialog.hide();
            };
        }

        function ToastController($scope, $mdToast) {
            $scope.hide = function () {
                $mdToast.hide();
            };
        }

        $scope.showDialog = function (ev, dialogTemplate) {
            $mdDialog.show({
                controller: DialogController,
                templateUrl: dialogTemplate,
                targetEvent: ev,
            });
        };

        $scope.showCustomToast = function (toastTemplate) {
            $mdToast.show({
                controller: ToastController,
                templateUrl: toastTemplate,
                hideDelay: 7000,
                position: 'bottom left'
            });
        };

        $scope.openCV = function (argument) {
             window.open('http://bit.ly/17Eipdj' , '_blank');
        };

        function loadSkills() {
            infoService
                .loadSkills()
                .then(function (data) {
                    $scope.skills = [].concat(data);
                });
        }

        function loadPersonal() {
            infoService
                .loadPersonal()
                .then(function (data) {
                    $scope.projects.personal = [].concat(data);
                });
        }

        function loadSecrets() {
            infoService
                .loadSecrets()
                .then(function (data) {
                    $scope.projects.personal = $scope.projects.personal.concat(data);
                    secretUnlocked = true;
                    $scope.showCustomToast('views/personal/konami.html')
                    document.getElementById('secret').play(); // Better in directive :(
                    console.log('¡Nuevos proyectos personales disponibles!');
                });
        }

        function loadProfessional() {
            infoService
                .loadProfessional()
                .then(function (data) {
                    $scope.projects.professional = [].concat(data);
                });
        }

        function loadSocials() {
            infoService
                .loadSocials()
                .then(function (data) {
                    $scope.socials = [].concat(data);
                });
        }

        function loadEducations() {
            infoService
                .loadEducations()
                .then(function (data) {
                    $scope.educations = [].concat(data);
                });
        }
        loadSkills();
        loadEducations();
        loadPersonal();
        loadProfessional();
        loadSocials();

        easter_egg = new Konami();
        easter_egg.code = function() {
            if (!secretUnlocked) {
                loadSecrets();
            }
        }
        easter_egg.load();
    }
})();
(function () {
    'use strict';

    angular.module('informations', [])
        .service('infoService', InfoDataService);

    function InfoDataService($q) {
        var skills,
            personal,
            secrets,
            professional,
            socials,
            educations;
        skills = [{
            what: 'HTML5',
            image: 'src/images/skills/html5.jpg'
        }, {
            what: 'CSS3',
            image: 'src/images/skills/css3.jpg'
        }, {
            what: 'JavaScript',
            image: 'src/images/skills/javascript.png'
        }, {
            what: 'AngularJS',
            image: 'src/images/skills/angular.jpg',
            notes: 'HTML mejorado para aplicaciones web alucinantes'
        }, {
            what: 'Polymer',
            image: 'src/images/skills/polymer.jpg',
            notes: 'Framework de desarrollo para crear web components.'
        }, {
            what: 'PhaserJS',
            image: 'src/images/skills/phaser.jpg',
            notes: 'Framework rápido y divertido para hacer juegos HTML5 para escritorio y móviles'
        }, {
            what: 'Git',
            image: 'src/images/skills/git.jpg',
            notes: 'Software de control de versiones'
        }, {
            what: 'NodeJS',
            image: 'src/images/skills/node.jpg',
            notes: 'Entorno de programación en la capa de servidor basado en ECMAScript'
        }, {
            what: 'GruntJS',
            image: 'src/images/skills/grunt.jpg',
            notes: 'Librería JavaScript para realizar tareas automáticas'
        }, {
            what: 'Gulp',
            image: 'src/images/skills/gulp.jpg',
            notes: 'Librería JavaScript para realizar tareas automáticas basada en streams'
        }, {
            what: 'Bower',
            image: 'src/images/skills/bower.png',
            notes: 'Manejador para instalar dependencias'
        }, {
            what: 'Yeoman',
            image: 'src/images/skills/yeoman.png',
            notes: 'Generador de esqueletos de aplicación'
        }, {
            what: 'Sass',
            image: 'src/images/skills/sass.jpg',
            notes: 'Vitamina tus hojas de estilo extendiendo sus características'
        }, {
            what: 'Jade',
            image: 'src/images/skills/jade.jpg',
            notes: 'Genera plantillas HTML con una sintaxis más sencilla y mucho más'
        }, {
            what: 'jQuery',
            image: 'src/images/skills/jquery.gif',
            notes: 'Escribe menos código para manejar el DOM, eventos, etc, ...'
        }, {
            what: 'Bootstrap',
            image: 'src/images/skills/bootstrap.jpg',
            notes: 'Framework de HTML, CSS y JS para crear páginas web'
        }, {
            what: 'Lodash',
            image: 'src/images/skills/lodash.png',
            notes: 'Librería javascript con gran cantidad de métodos para manejar objetos y arrays'
        }, {
            what: 'Raphael',
            image: 'src/images/skills/raphael.png',
            notes: 'Librería para dibujar gráficos vectoriales en la web de forma sencilla'
        }, {
            what: 'D3',
            image: 'src/images/skills/d3.png',
            notes: 'Crea gráficos alucinantes con esta librería'
        }];

        educations = [{
            image: 'src/images/education/psm1.png',
            what: 'Profesional Scrum Master I',
            where: 'scrum.org',
            notes: '2018'
        }, {
            image: 'src/images/education/gamificacion-intro-docentes.png',
            what: 'Introducción a la gamificación para docentes',
            href: 'https://goo.gl/rDzPXK',
            where: 'Telefónica scolarTIC',
            notes: '2016'
        },{
            image: 'src/images/education/carlosIII.gif',
            what: 'Grado en ingeniería informática',
            where: 'CarlosIII',
            notes: '2013'
        }, {
            image: 'src/images/education/mongo.png',
            what: 'M101JS: MongoDB for Node.js Developers',
            href: 'https://s3.amazonaws.com/edu-cert.10gen.com/downloads/03820222566b45cabdc47bbb8d23b3fb/Certificate.pdf',
            where: 'MongoDB',
            notes: '2013'
        }];

        personal = [
        {
            title: 'Peteypedia',
            image: 'src/images/personal/peteypedia.jpg',
            detail: '2020',
            notes: 'Réplica en español de la Peteypedia de Watchmen de la serie de HBO.',
            dialogTemplate: 'views/personal/peteypedia.html'
        },
        {
            title: 'amiibum',
            image: 'src/images/personal/amiibum.jpg',
            detail: '2019',
            notes: 'Marca tus amiibos de Nintendo en esta app hecha con lit-html.',
            dialogTemplate: 'views/personal/amiibum.html'
        }, {
            title: 'Galaxia oculta',
            image: 'src/images/personal/galaxia-oculta.jpg',
            detail: '2016 - Actualmente',
            notes: 'Canal de podcast. Programa principal sobre videojuegos #pixelOculto y #cantinaOculta para otros contenidos.',
            dialogTemplate: 'views/personal/galaxia-oculta.html'
        },
        {
            title: 'Colaborador VGA',
            image: 'src/images/personal/vga.jpg',
            detail: '2014 - Actualmente',
            notes: 'He participado impartiendo charlas sobre videojuegos en el meetup VGA.',
            dialogTemplate: 'views/personal/vga.html'
        }, {
            title: 'Project Black',
            image: 'src/images/personal/project-black.png',
            detail: '2017',
            notes: 'Desarrollado junto a Samuel Dorado Rodríguez dentro de la iniciativa "Hacking the game" de s|ngular.',
            dialogTemplate: 'views/personal/project-black.html'
        }, {
            title: 'Battleship - Hundir la flota',
            image: 'src/images/personal/battleship.jpg',
            detail: '2016',
            notes: 'Experimento con Angular 2.',
            dialogTemplate: 'views/personal/battleship.html'
        }, {
            title: 'Where is it?',
            image: 'src/images/personal/where-is-it.jpg',
            detail: '2016',
            notes: 'Un juego muy sencillo que ocupa menos de 1 kb.',
            dialogTemplate: 'views/personal/where-is-it.html'
        }, {
            title: 'Master Wars',
            image: 'src/images/personal/master-wars.jpg',
            detail: '2016',
            notes: 'Experimento con React y la Api pública de Marvel. ¿Cuánto sabes del universo Marvel?',
            dialogTemplate: 'views/personal/master-wars.html'
        }, {
            title: 'Shootem Totem',
            image: 'src/images/personal/shootem-totem.jpg',
            detail: '2016',
            notes: 'Shoot´em up frenético. Se puede usar el móvil como controlador mandando ordenes por websockets a la nave.',
            dialogTemplate: 'views/personal/shootem-totem.html'
        }, {
            title: 'Master Gun',
            image: 'src/images/personal/master-gun.jpg',
            detail: '2015',
            notes: 'Shooter al estilo western hecho con Polymer.',
            dialogTemplate: 'views/personal/master-gun.html'
        }, {
            title: 'Gau el experto',
            image: 'src/images/personal/gau.jpg',
            detail: '2015',
            notes: 'Aventura interactiva donde el protagonista es un experto en tecnología.',
            dialogTemplate: 'views/personal/gau.html'
        }, {
            title: 'Egypt Adventure',
            image: 'src/images/personal/egypt-adventure.jpg',
            detail: '2014 - 2015',
            notes: 'Juego de plataformas con toques RPG. Ha sido desarrollado en HTML5 con PhaserJS. Disponible para PC y OSX.',
            dialogTemplate: 'views/personal/egypt-adventure.html'
        }, {
            title: 'Arcade Pi',
            image: 'src/images/personal/raspberry-pi.jpg',
            detail: '2014',
            notes: 'Con ayuda del sistema operativo PiMame monté una consola arcade capaz de emular cualquier consola clásica.',
            dialogTemplate: 'views/personal/arcade-pi.html'
        }, {
            title: 'Click Master',
            image: 'src/images/personal/click-master.jpg',
            detail: '2013',
            notes: '¿Cuánto tardas en hacer 211 clicks sin pasarte? Mini juego hecho con AngularJS y NodeJS.',
            dialogTemplate: 'views/personal/click-master.html'
        }];

        secrets = [{
            title: 'Trainvial',
            image: 'src/images/personal/trainvial.jpg',
            detail: '2012',
            notes: 'Mi primer experimento con AngularJS. Demo de un trivial compatible con las plataformas móviles y escritorio.',
            dialogTemplate: 'views/personal/trainvial.html'
        }, {
            title: 'Invitado a Radio GameOn',
            image: 'src/images/personal/game-on.png',
            detail: '13/07/2016',
            notes: 'Mi primera colaboración en radio.',
            dialogTemplate: 'views/personal/game-on.html'
        }, {
            title: 'Cromos de Egypt Adventure',
            image: 'src/images/personal/egypt-adventure-cards.jpg',
            detail: '2015',
            notes: 'Explora detalles de Egypt Adventure con los cromos promocionales realizados para la campaña de marketing.',
            dialogTemplate: 'views/personal/egypt-adventure-cards.html'
        }, {
            title: 'Portafolio',
            image: 'src/images/personal/portfolio.jpg',
            detail: '2015',
            notes: 'Descubre las tecnologías y motivaciones que han llevado a cabo este proyecto.',
            dialogTemplate: 'views/personal/portfolio.html'
        }];

        professional = [{
            title: 'BBVA - Cells Apps',
            company: 's|ngular, 2016',
            image: 'src/images/professional/bbva-cells.jpg',
            notes: 'Cells es la nueva propuesta de BBVA para el desarrollo front. Soporte a las aplicaciones desarrolladas con Cells.',
            dialogTemplate: 'views/professional/bbva-cells-apps.html'
        }, {
            title: 'Bankia - Arquitectura componentes',
            company: 'Adesis Netlife, GFT 2013 - 2016',
            image: 'src/images/professional/bankia.jpg',
            notes: 'Sentar las bases de una arquitectura basada en tecnologías web modernas que permita crear aplicaciones de forma ágil',
            dialogTemplate: 'views/professional/bankia.html'
        }, {
            title: 'Mapfre GAIA',
            company: 'Adesis Netlife, 2013',
            image: 'src/images/professional/mapfre.jpg',
            notes: 'Con el framework GAIA se agilizará el proceso de desarrollo para crear aplicaciones web.',
            dialogTemplate: 'views/professional/gaia.html'
        }, {
            title: 'Seguros Bancomer',
            company: 'Adesis Netlife, 2012',
            image: 'src/images/professional/bancomer.jpg',
            notes: 'Renovación de la presencia digital de Seguros Bancomer (BBVA)',
            dialogTemplate: 'views/professional/bancomer-seguros.html'
        }, {
            title: 'Generación de plantillas XSLT-FO',
            company: 'Adesis Netlife, 2012',
            image: 'src/images/professional/bancomer.jpg',
            notes: 'Generación de plantillas XSLT-FO que alimentadas de archivos XML permitiesen la generación de documentos PDF dinámicos.',
            dialogTemplate: 'views/professional/xslt.html'
        }];

        socials = [{
            name: 'Github',
            image: 'src/images/social/github.png',
            icon: 'icon-github-circled',
            href: 'https://github.com/alexarroyoduque',
            contact: 'AlexArroyoDuque'
        }, {
            name: 'Twitter',
            image: 'src/images/social/twitter.png',
            icon: 'icon-twitter',
            href: 'https://twitter.com/alexarroyoduque',
            contact: '@AlexArroyoDuque'
        }, {
            name: 'slides',
            image: 'src/images/social/slides.png',
            icon: 'icon-slideshare',
            href: 'http://slides.com/alexarroyoduque/',
            contact: 'alexarroyoduqe'
        }, {
            name: 'Correo',
            image: 'src/images/social/email.png',
            icon: 'icon-mail',
            href: 'mailto:alexarroyoduque@gmail.com?Subject=Saludos',
            contact: 'alexarroyoduque@gmail.com'
        }, {
            name: 'Linkedin',
            image: 'src/images/social/linkedin.png',
            icon: 'icon-linkedin-squared',
            href: 'https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile',
            contact: 'Alejandro Arroyo Duque'
        }];

        return {
            loadSkills: function () {
                return $q.when(skills);
            },
            loadPersonal: function () {
                return $q.when(personal);
            },
            loadSecrets: function () {
                return $q.when(secrets);
            },
            loadProfessional: function () {
                return $q.when(professional);
            },
            loadSocials: function () {
                return $q.when(socials);
            },
            loadEducations: function () {
                return $q.when(educations);
            }

        };
    }
})();

(function () {

    'use strict';

    angular.module('starterApp').directive('alexAudioControl', [
        function () {
            return {
                restrict: 'A',
                link: function (scope) {
                    var theme = document.getElementById('portfolioTheme');
                    scope.$watch('isPlaying', function (newValue) {
                        if (newValue) {
                            theme.play();
                        } else {
                            theme.pause();
                        }
                    })
                }
            };
        }
    ]);
})();